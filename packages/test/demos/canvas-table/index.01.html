<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Canvas Table</title>
  <style>
    * {
      margin: 0;
      padding: 0;
    }
    body{
      padding: 12px;
    }
  </style>
  <link rel="stylesheet" href="../../node_modules/@phoenix_fan/canvas-table/lib/index.css">
  <script src="../../node_modules/@phoenix_fan/canvas-table/lib/index.umd.js" ></script>
</head>
<body>
  <div id="app"></div>

  <script>

    const Table = CanvasTable.default;

    const columns = [
      { label: "姓名", key: "name", width: 120, fixed: 'left' },
      { label: "年龄", key: "age", width: 120, align: 'right' },
      { label: "学校", key: "school", width: 120 },
      {
        label: '成绩',
        key: 'score',
        children: [
          { key: 'score1', label: '语文', width: 90, align: 'center' },
          { key: 'score2', label: '数学', width: 90 },
          { key: 'score3', label: '英语', width: 90 },
        ]
      },
      { label: "分数分数分数分数分数分数分数分数", key: "source", width: 120 },
      { label: "操作", key: "options", minWidth: 120 },
      { label: "姓名", key: "name", width: 120 },
      { label: "年龄", key: "age", width: 120 },
      { label: "学校", key: "school", width: 120 },
      { label: "分数分数分数分数分数分数分数分数", key: "source", width: 120 },
      { label: "操作", key: "options", minWidth: 120, fixed: 'right' },
    ]

    let tableData = [];

    const instance = new Table({
      el: '#app',
      data: tableData,
      columns,
      height: 360,
      rowHeight: (row) => ~~(Math.random() * 60 + 20)
    })

    getData().then(res => {
      tableData = res;
      instance.setData(res);
    })

    function getData () {
      return new Promise(resolve => setTimeout(() => {
        const data = new Array(200).fill(null).map((v, i) => ({
          id: ~~(Math.random() * 999999999),
          index: i + 1,
          name: '你好啊',
          age: ~~(Math.random() * 99),
          school: '五道口职业技术学院五道口职业技术学院',
          source: ~~(Math.random() * 150),
          score1: ~~(Math.random() * 100),
          score2: ~~(Math.random() * 100),
          score3: ~~(Math.random() * 100),
        }))
        resolve(data);
      }, 200));
    }
  </script>
</body>
</html>
